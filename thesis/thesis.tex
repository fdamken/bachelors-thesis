% !TeX program = lualatex


% Do not surround the equal signs with spaces, it causes errors!
\documentclass[
	ruledheaders=section,
	class=report,
	thesis={type=bachelor},
	accentcolor=1c,
	custommargins=false,
	marginpar=false,
	%BCOR = 5mm, % Bindekorrektur
	parskip=half-,
	fontsize=11pt,
	instbox=false
]{tudapub}


% Core packages.
% Primary: English, Secondary: German.
\usepackage[main = english, ngerman]{babel}
% Other packages.
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{siunitx}
\usepackage{amsmath}
\usepackage{amsthm}
% Remove dot at the end: nopostdot; Don't skip any groups: nogroupskip
\usepackage[xindy, section = section, nonumberlist, sanitize={symbol=false}, shortcuts, acronym, nomain, nowarn]{glossaries}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{enumitem}
%\usepackage{listings}
\usepackage{xcolor}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{epstopdf}
\usepackage{wrapfig}
\usepackage[vlined, boxed]{algorithm2e}
\usepackage[autostyle]{csquotes}
\usepackage{microtype}

% Debug packages.
\usepackage{comment}
\usepackage{todonotes}


\makeatletter

% Make LOF a section.
\renewcommand\listoffigures{
	\section*{\listfigurename}
	\@mkboth{\MakeUppercase\listfigurename}{\MakeUppercase\listfigurename}
	\@starttoc{lof}
}
% Make LOT a section.
\renewcommand\listoftables{
	\section*{\listtablename}
	\@mkboth{\MakeUppercase\listtablename}{\MakeUppercase\listtablename}
	\@starttoc{lot}
}

\makeatother



% Style definitions.

% Matrix/Vector notation.
\renewcommand{\vec}[1]{\boldsymbol{\mathrm{#1}}}
\newcommand{\mat}[1]{\boldsymbol{\mathrm{#1}}}
% Shorthands.
\newcommand{\normal}{\mathcal{N}}
\newcommand{\gaussianMulti}[4]{\frac{1}{\left(2\pi\right)^{#4/2} \cdot \lvert #3 \rvert^{1/2}} \exp \bigg\{\! -\frac{1}{2} \left(#1 - #2\right)^T #3^{-1} \left(#1 - #2\right) \bigg\}}
\newcommand{\logGaussianMulti}[4]{\frac{1}{2} \ln \lvert #3 \rvert - \frac{#4}{2} \ln\left(2\pi\right) - \frac{1}{2} \left(#1 - #2\right)^T #3^{-1} \left(#1 - #2\right)}
\newcommand{\given}{\,\vert\,}
\newcommand{\biggiven}{\,\big\vert\,}
\newcommand{\Biggiven}{\,\Big\vert\,}
\newcommand{\bigggiven}{\,\bigg\vert\,}
\newcommand{\Bigggiven}{\,\Bigg\vert\,}
\newcommand{\E}{\mathbb{E}}
\newcommand{\tr}{\mathrm{tr}}

\newcommand{\paren}[1]{\mathopen{}\left( {#1}_{{}_{}}\,\negthickspace\right)\mathclose{}}
\newcommand{\bracket}[1]{\mathopen{}\left[ {#1}_{{}_{}}\,\negthickspace\right]\mathclose{}}

\renewcommand{\arraystretch}{1.5}
\parindent0pt

% Allow page breaks inside of equations.
\allowdisplaybreaks

% Do not include subsections and lower in TOC.
\setcounter{tocdepth}{1}

% BibTeX.
\renewcommand{\bibname}{References}
\bibliographystyle{ieeetr}

% TikZ-related stuff.
% placeholder

% Glossary styles.
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newglossarystyle{iasThesisGeneral}{
	\glossarystyle{super3colheader}%
	\renewenvironment{theglossary}%
	{\begin{longtable}{L{0.15\textwidth}L{0.8\textwidth}R{0\textwidth}}}%
		{\end{longtable}}%
	\renewcommand*{\glossaryheader}{\bf{\entryname} & \bf{\descriptionname} & \\}
	\renewcommand*{\glossaryentryfield}[5]{\glsentryitem{##1}\glstarget{##1}{##2} & ##3 \\}
}
\newglossarystyle{iasThesisOperators}{
	\glossarystyle{super3colheader}
	\renewenvironment{theglossary}
	{\begin{longtable}{L{0.15\textwidth}L{0.55\textwidth}L{0.25\textwidth}}}%
		{\end{longtable}}%
	\renewcommand*{\glossaryheader}{\bf{\entryname} & \bf{\descriptionname} & \bf{Operator} \\}
	\renewcommand*{\glossaryentryfield}[5]{\glsentryitem{##1}\glstarget{##1}{##2} & ##3 & ##4 \\}
}


% Include gloassary and TikZ graphs to not clutter this file.
\input{preamble/glossary}
\input{preamble/tikzGraphs}

\begin{document}
	% No page numbering for the preamble.
	\pagenumbering{gobble}

	\Metadata{
		title = Learning Stochastic Nonlinear Dynamical Systems With the Koopman Operator,
		author = Fabian Damken
	}

	\title{Learning Stochastic Nonlinear Dynamical Systems With the Koopman Operator}
	\subtitle{Lernen stochastischer nichtlinearer dynamischer Systeme mit dem Koopman-Operator}
	\author{Fabian Damken}
	\birthplace{Frankfurt am Main}
	\reviewer{Jan Peters \and Joe Watson}
	\department{inf}
	\institute{Intelligent Autonomous Systems}
	%\group{Working Group}
	\addTitleBoxLogo*{\includegraphics[width=0.75\linewidth]{img/iasLogo.pdf}}

	\submissiondate{\today}
	\examdate{\today}

	%\tuprints{urn=1234,printid=12345}
	%\dedication{FÃ¼r alle, die \TeX{} nutzen.}

	\maketitle

	\affidavit

	\tableofcontents

	\chapter*{Figures~and~Tables}
		\begingroup
		\let\clearpage\relax
		\listoffigures\listoftables
		\endgroup
	% end

	\chapter*{Abbreviations,~Symbols and Operators}
		\glsaddall
		\printglossary[type = acronym, title = List of Abbreviations, style = iasThesisGeneral]
		\printglossary[type = symbol, style = iasThesisGeneral]
		\printglossary[type = operator, style = iasThesisOperators]
	% end

	% Start page numbering.
	\pagenumbering{arabic}

	% Someone wants content, for whatever reason.
	\include{content/0-introduction}
	\include{content/1-motivation}
	\include{content/2-foundations}
	\include{content/3-experiments}
	\include{content/4-results}
	\include{content/5-discussion}
	\include{content/6-outlook}

	\cleardoublepage
	\bibliography{literature/lit}
	\nocite{*}

	\cleardoublepage

	\appendix
	\include{meta/appendix}
	\chapter{Snippets}
		\include{snippets/semi-linear-dynamical-systems}
	% end
\end{document}
